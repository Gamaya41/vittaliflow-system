<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clínica - Central Administrativa</title>
    
    <link rel="stylesheet" href="assets/css/admin-styles.css"> 

</head>
<body>
    <header>
        <div style="display: flex; align-items: center;">
            <img id="header-logo" src="" alt="Logo da Clínica" style="height: 50px; margin-right: 20px; display:none;">
            <h1>Central Administrativa</h1>
        </div>
        <p>Bem-vindo(a), CEO. Controle de Clientes e Agenda.</p>
    </header>

    <main>
        <nav id="sidebar-menu">
            <ul>
                <li><a href="#dashboard">Dashboard</a></li>
                <li><a href="#terapeutas">Gerenciar Terapeutas</a></li> 
                <li><a href="#clientes">Gerenciar Pacientes</a></li>
                <li><a href="#pacotes">Gerenciar Pacotes</a></li>
                <li><a href="#agenda">Agenda de Sessões</a></li>
                <li><a href="#financeiro">Financeiro Básico</a></li>
                <li><a href="#config">Configurações</a></li>
                
            </ul>
            
            <div style="padding: 20px 15px; border-top: 1px solid #e2e8f0; margin-top: 50px;">
                <button id="logout-btn" class="cancel-button" style="width: 100%; color: #c53030; font-weight: 600;">
                    Sair (Logout)
                </button>
            </div>
        </nav>

        <section id="content-area">
            
           <div id="dashboard" class="content-module" style="display:block;">
    <h2>Dashboard Resumo</h2>
    
    <div id="kpi-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 40px;">
        
        <div class="kpi-card glass-effect">
            <h3>Clientes Ativos</h3>
            <p id="kpi-clientes" class="kpi-value">0</p>
        </div>

        <div class="kpi-card glass-effect">
            <h3>Sessões Próximas</h3>
            <p id="kpi-proximas" class="kpi-value">0</p>
        </div>

        <div class="kpi-card kpi-financeiro glass-effect">
            <h3>Saldo Financeiro (Mês Atual)</h3>
            <p id="kpi-saldo" class="kpi-value" style="color: var(--color-secondary); font-size: 2.2em;">R$ 0,00</p>
        </div>
    </div>
    
    <div id="upcoming-appointments">
        <h3 style="border-bottom: 1px solid #e2e8f0; padding-bottom: 10px;">Próximos 5 Agendamentos</h3>
        <table id="upcoming-list" class="glass-table">
            <thead>
                <tr>
                    <th>Data/Hora</th>
                    <th>Paciente</th>
                    <th>Serviço</th>
                    <th>Terapeuta</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <tr><td colspan="5">Carregando agendamentos...</td></tr>
            </tbody>
        </table>
    </div>

</div>

            <div id="terapeutas-module" class="content-module" style="display:none;">
                <h2>Gerenciar Terapeutas (Usuários)</h2>

                <div id="add-terapeuta-form-container" style="display:none;">
                    <h3>Cadastro de Novo Terapeuta</h3>
                    <form id="add-terapeuta-form">
                        <input type="hidden" id="terapeuta-id-edit">
                        <div class="input-group-admin">
                            <label for="nome-terapeuta">Nome Completo:</label>
                            <input type="text" id="nome-terapeuta" required>
                        </div>
                        <div class="input-group-admin">
                            <label for="especialidade-terapeuta">Especialidade:</label>
                            <input type="text" id="especialidade-terapeuta" required>
                        </div>
                        <div class="input-group-admin">
                            <label for="email-terapeuta">E-mail:</label>
                            <input type="email" id="email-terapeuta" required>
                        </div>
                        <button type="submit" class="add-button">Salvar Terapeuta</button>
                        <button type="button" id="cancel-add-btn" class="cancel-button">Cancelar</button>
                    </form>
                </div>
                
                <button id="add-terapeuta-btn" class="add-button">+ Adicionar Novo Terapeuta</button>
                
                <button id="print-terapeutas-btn" class="cancel-button" style="margin-left: 15px;">
                    Imprimir Lista de Terapeutas
                </button>
                
                <table id="terapeutas-list">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>Especialidade</th>
                            <th>E-mail</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>

            <div id="clientes-module" class="content-module" style="display:none;">
                <h2>Gerenciar Pacientes</h2>
                <p>Cadastro e gestão de fichas clínicas simplificadas (Anamnese Básica).</p>
                
                <div id="add-cliente-form-container" style="display: none;">
                    <h3>Ficha do Paciente</h3>
                    <form id="add-cliente-form">
                        <input type="hidden" id="cliente-id-edit">
                        
                        <fieldset>
                            <legend>Dados de Contato</legend>
                            <div class="input-group-admin">
                                <label for="nome-cliente">Nome Completo:</label>
                                <input type="text" id="nome-cliente" required>
                            </div>
                            <div class="input-group-admin">
                                <label for="email-cliente">E-mail:</label>
                                <input type="email" id="email-cliente" required>
                            </div>
                            <div class="input-group-admin">
                                <label for="telefone-cliente">Telefone:</label>
                                <input type="tel" id="telefone-cliente">
                            </div>
                        </fieldset>

                        <fieldset id="anamnese-ficha">
                            <legend>Ficha de Anamnese Detalhada</legend>

                            <div class="input-group-admin">
                                <label for="queixa-principal">Queixa Principal / Objetivos do Tratamento:</label>
                                <textarea id="queixa-principal" rows="3" placeholder="O que o cliente busca?"></textarea>
                            </div>
                            
                            <div class="input-group-admin">
                                <label for="historico-medico">Histórico Médico Relevante e Cirurgias Anteriores:</label>
                                <textarea id="historico-medico" rows="3" placeholder="Doenças crônicas, condições preexistentes, histórico familiar..."></textarea>
                            </div>

                            <div class="input-group-admin">
                                <label for="medicamentos-uso">Medicamentos em Uso (Incluindo Suplementos):</label>
                                <textarea id="medicamentos-uso" rows="2" placeholder="Nome, dosagem, frequência."></textarea>
                            </div>
                            
                            <div class="input-group-admin">
                                <label for="alergias">Alergias Conhecidas:</label>
                                <textarea id="alergias" rows="2" placeholder="Alergias a alimentos, medicamentos, óleos essenciais, etc."></textarea>
                            </div>

                            <div class="input-group-admin">
                                <label for="observacoes-anamnese">Outras Observações Importantes:</label>
                                <textarea id="observacoes-anamnese" rows="3" placeholder="Estilo de vida, hábitos, restrições específicas..."></textarea>
                            </div>
                        </fieldset>
                        
                        <div style="text-align: right; margin-top: 20px;">
                            <button type="submit" class="add-button">Salvar Ficha do Cliente</button>
                            <button type="button" id="cancel-cliente-btn" class="cancel-button">Cancelar</button>
                        </div>
                    </form>
                </div>

                <button id="add-cliente-btn" class="add-button">+ Cadastrar Novo Paciente</button>
                
                <table id="clientes-list">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>E-mail</th>
                            <th>Telefone</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>

            <div id="pacotes-module" class="content-module" style="display:none;">
                <h2>Gerenciamento de Pacotes de Sessões</h2>
                <p>Visualize o status de uso e sessões restantes por pacote.</p>
                
                <div id="add-pacote-form-container" style="display: none;">
                    <h3>Detalhes do Pacote</h3>
                    <form id="add-pacote-form">
                        <input type="hidden" id="pacote-id-edit">
                        
                        
                        <div class="input-group-admin">
                            <label for="cliente-pacote">Paciente Vínculado:</label>
                            <select id="cliente-pacote" required>
                                <option value="">Carregando Pacientes...</option>
                            </select>
                        </div>

                        <div class="input-group-admin">
                            <label for="nome-pacote">Nome do Pacote (Ex: Bem-Estar Profundo):</label>
                            <input type="text" id="nome-pacote" required>
                        </div>

                        <div class="input-group-admin">
                            <label for="total-sessoes">Total de Sessões no Pacote:</label>
                            <input type="number" id="total-sessoes" min="1" required>
                        </div>
                        
                        <div class="input-group-admin">
                            <label for="valor-pacote">Valor Total do Pacote (R$):</label>
                            <input type="number" id="valor-pacote" step="0.01" required>
                        </div>
                        
                        <div style="text-align: right; margin-top: 20px;">
                            <button type="submit" class="add-button">Salvar Pacote</button>
                            <button type="button" id="cancel-pacote-btn" class="cancel-button">Cancelar</button>
                        </div>
                    </form>
                </div>
                <button id="add-pacote-btn" class="add-button">+ Criar Novo Pacote</button>
<button id="print-pacotes-btn" class="cancel-button" style="margin-left: 15px;">
    Imprimir Lista de Pacotes (Resumo)
</button>


<div style="margin-top: 30px; margin-bottom: 20px; padding: 15px; background-color: var(--color-light-bg); border-radius: 8px;">
    <label for="filtro-cliente-pacotes" style="font-weight: 600; color: var(--color-primary);">Filtrar por Paciente:</label>
    <select id="filtro-cliente-pacotes" style="width: 300px; padding: 8px; border-radius: 4px; border: 1px solid #ccc;">
        <option value="0" selected>-- Mostrar Todos os Pacientes --</option>
        </select>
    
    <button id="print-pacotes-cliente-btn" class="add-button" style="padding: 9px 18px; margin-left: 15px; font-size: 0.9em;">
        Imprimir Relatório do Paciente
    </button>
</div>

<table id="pacotes-list">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Paciente</th>
                            <th>Nome do Pacote</th>
                            <th>Total de Sessões</th>
                            <th>Sessões Realizadas</th>
                            <th>Sessões Restantes</th>
                            <th>Status</th>
                            <th>Ações</th> </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>


            <div id="agenda-module" class="content-module" style="display:none;">
                <h2>Agenda de Sessões</h2>
                <p>Agendamento e gerenciamento de sessões.</p>

                <div id="add-agendamento-form-container" style="display: none;">
                    <h3>Detalhes da Sessão</h3>
                    <form id="add-agendamento-form">
                        <input type="hidden" id="agendamento-id-edit">
                        
                        <div class="input-group-admin">
                            <label for="cliente-agendamento">Paciente:</label>
                            <select id="cliente-agendamento" required>
                                <option value="">Carregando Pacientes...</option>
                            </select>
                        </div>

                        <div class="input-group-admin">
                            <label for="terapeuta-agendamento">Terapeuta:</label>
                            <select id="terapeuta-agendamento" required>
                                <option value="">Carregando Terapeutas...</option>
                            </select>
                        </div>

                        <div class="input-group-admin">
                            <label for="tratamento-agendamento">Serviço/Tratamento:</label>
                            <select id="tratamento-agendamento" required>
                                <option value="">Carregando Serviços...</option>
                            </select>
                        </div>
                        
                        <div class="input-group-admin">
                            <label for="pacote-agendamento">Vincular a Pacote (Opcional):</label>
                            <select id="pacote-agendamento">
                                <option value="0" selected>Sessão Individual (Avulsa)</option>
                            </select>
                        </div>

                        <div class="input-group-admin">
                            <label for="sala-agendamento">Sala/Ambiente:</label>
                            <select id="sala-agendamento" required>
                                <option value="">Carregando Salas...</option>
                            </select>
                        </div>

                        <div class="input-group-admin">
                            <label for="data-agendamento">Data:</label>
                            <input type="date" id="data-agendamento" required>
                        </div>

                        <div class="input-group-admin">
                            <label for="hora-agendamento">Hora:</label>
                            <input type="time" id="hora-agendamento" required>
                        </div>

                        <div class="input-group-admin">
                            <label for="status-agendamento">Status:</label>
                            <select id="status-agendamento" required>
                                <option value="Agendado">Agendado</option>
                                <option value="Confirmado">Confirmado</option>
                                <option value="Realizado">Realizado</option>
                                <option value="Cancelado">Cancelado</option>
                            </select>
                        </div>

                        <div style="text-align: right; margin-top: 20px;">
                            <button type="submit" class="add-button">Salvar Agendamento</button>
                            <button type="button" id="cancel-agendamento-btn" class="cancel-button">Cancelar</button>
                        </div>
                    </form>
                </div>
                <button id="add-agendamento-btn" class="add-button">+ Novo Agendamento</button>
                
                <table id="agendamentos-list">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Data/Hora</th>
                            <th>Paciente</th>
                            <th>Terapeuta</th>
                            <th>Serviço</th>
                            <th>Sala</th>
                            <th>Status</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>

            <div id="financeiro-module" class="content-module" style="display:none;">
                <h2>Controle Financeiro Básico</h2>
                <p>Gerencie custos fixos (aluguéis) e acompanhe a receita dos atendimentos.</p>

                <nav id="financeiro-tabs">
                    <button class="financeiro-tab active" data-target="despesas">Despesas (Aluguéis/Custos)</button>
                    <button class="financeiro-tab" data-target="receitas" disabled>Receitas (A ser implementado)</button>
                </nav>
                <hr>

                <div id="despesas-content" class="financeiro-content active">
                    <div id="add-despesa-form-container" style="display:none;">
                        <h4>Detalhes da Despesa</h4>
                        <form id="add-despesa-form">
                            <input type="hidden" id="despesa-id-edit">
                            <div class="input-group-admin">
                                <label for="tipo-despesa">Tipo:</label>
                                <select id="tipo-despesa" required>
                                    <option value="Custo Fixo">Custo Fixo</option>
                                    <option value="Melhorias/Manutenção">Melhorias/Manutenção</option>
                                    <option value="Imposto/Taxa">Imposto/Taxa</option>
                                    <option value="Outros">Outros</option>
                                </select>
                            </div>
                            <div class="input-group-admin">
                                <label for="descricao-despesa">Descrição:</label>
                                <input type="text" id="descricao-despesa" required>
                            </div>
                            <div class="input-group-admin">
                                <label for="valor-despesa">Valor:</label>
                                <input type="number" id="valor-despesa" step="0.01" required>
                            </div>
                            <div class="input-group-admin">
                                <label for="data-despesa">Data de Pagamento:</label>
                                <input type="date" id="data-despesa" required>
                            </div>
                            <button type="submit" class="add-button">Salvar Despesa</button>
                            <button type="button" id="cancel-despesa-btn" class="cancel-button">Cancelar</button>
                        </form>
                    </div>

                    <button id="add-despesa-btn" class="add-button">+ Nova Despesa</button>
                    
                    <table id="despesas-list">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Tipo</th>
                                <th>Descrição</th>
                                <th>Valor</th>
                                <th>Data</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>

                <div id="receitas-content" class="financeiro-content" style="display:none;">
                    <p>Aqui aparecerão as receitas geradas (a partir dos Agendamentos concluídos).</p>
                </div>
            </div>

            <div id="config-module" class="content-module" style="display:none;">
                <h2>Configurações</h2>
                <p>Gerenciamento de serviços e infraestrutura da Clínica.</p>

                <nav id="config-tabs">
                    <button class="config-tab active" data-target="empresa">Dados da Empresa</button> 
                    <button class="config-tab" data-target="tratamentos">Serviços/Tratamentos</button>
                    <button class="config-tab" data-target="salas">Salas/Ambientes</button>
                    <button class="config-tab" data-target="senha">Alterar Senha</button>
                </nav>
                <hr>
                
<div id="empresa-content" class="config-content active">
    <div id="empresa-container">
        <h4>Dados da Empresa e Logo</h4>
        <form id="empresa-form">
            <div class="input-group-admin">
                <label for="nome-empresa">Nome da Clínica:</label>
                <input type="text" id="nome-empresa" required>
            </div>
            <div class="input-group-admin">
                <label for="cnpj-empresa">CNPJ:</label>
                <input type="text" id="cnpj-empresa" placeholder="Ex: 00.000.000/0001-00">
            </div>
            
            <div class="input-group-admin">
                <label for="logo-upload">Logo da Empresa (JPG, PNG):</label>
                <input type="file" id="logo-upload" accept="image/png, image/jpeg" style="width: 90%;"> 
            </div>
            
            <div style="margin-bottom: 25px;">
                <p>Logo Atual:</p>
                <img id="preview-logo-upload" src="" alt="Pré-visualização da Logo" style="max-height: 100px; max-width: 100%; border: 1px solid #ccc; padding: 5px; display: none;">
            </div>

            <button type="submit" class="add-button">Salvar Configurações</button>
            <p id="empresa-message" style="margin-top: 15px;"></p>
        </form>
    </div>
</div>

                <div id="tratamentos-content" class="config-content" style="display:none;">
                    <div id="add-tratamento-form-container" style="display:none;">
                        <h4>Detalhes do Serviço</h4>
                        <form id="add-tratamento-form">
                            <input type="hidden" id="tratamento-id-edit">
                            <div class="input-group-admin">
                                <label for="nome-tratamento">Nome do Serviço:</label>
                                <input type="text" id="nome-tratamento" required>
                            </div>
                            <div class="input-group-admin">
                                <label for="preco-tratamento">Preço (R$):</label>
                                <input type="number" id="preco-tratamento" step="0.01" required>
                            </div>
                            <button type="submit" class="add-button">Salvar</button>
                            <button type="button" id="cancel-tratamento-btn" class="cancel-button">Cancelar</button>
                        </form>
                    </div>

                    <button id="add-tratamento-btn" class="add-button">+ Adicionar Serviço</button>
                    
                    <table id="tratamentos-list">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome</th>
                                <th>Preço</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div id="salas-content" class="config-content" style="display:none;">
                    <div id="add-sala-form-container" style="display:none;">
                        <h4>Detalhes da Sala</h4>
                        <form id="add-sala-form">
                            <input type="hidden" id="sala-id-edit">
                            <div class="input-group-admin">
                                <label for="nome-sala">Nome da Sala:</label>
                                <input type="text" id="nome-sala" required>
                            </div>
                            <div class="input-group-admin">
                                <label for="capacidade-sala">Capacidade (Pessoas):</label>
                                <input type="number" id="capacidade-sala" required>
                            </div>
                            <button type="submit" class="add-button">Salvar</button>
                            <button type="button" id="cancel-sala-btn" class="cancel-button">Cancelar</button>
                        </form>
                    </div>
                    
                    <button id="add-sala-btn" class="add-button">+ Adicionar Sala</button>

                    <table id="salas-list">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome da Sala</th>
                                <th>Capacidade</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div id="senha-content" class="config-content" style="display:none;">
                    <div id="change-password-container">
                        <h4>Alteração de Senha</h4>
                        <form id="change-password-form">
                            <div class="input-group-admin">
                                <label for="new-password">Nova Senha:</label>
                                <input type="password" id="new-password" required>
                            </div>
                            <div class="input-group-admin">
                                <label for="confirm-password">Confirmar Nova Senha:</label>
                                <input type="password" id="confirm-password" required>
                            </div>
                            <button type="submit" class="add-button">Alterar Senha</button>
                            <p id="password-message" style="margin-top: 10px;"></p>
                        </form>
                    </div>
                </div>
            </div>

        </section>
    </main>

    <div id="quick-view-modal" style="
        display: none; 
        position: fixed; 
        z-index: 1000; 
        left: 0; 
        top: 0; 
        width: 100%; 
        height: 100%; 
        overflow: auto; 
        background-color: rgba(0,0,0,0.5);
    ">
        <div style="
            background-color: #fefefe;
            margin: 5% auto;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 650px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        ">
            <span id="close-modal-btn" style="
                color: #aaa;
                float: right;
                font-size: 28px;
                font-weight: bold;
                cursor: pointer;
                transition: color 0.2s;
            ">&times;</span>
            
            <h3 style="border-bottom: 2px solid #eee; padding-bottom: 10px;">Ficha Rápida do Paciente</h3>
            
            <div id="quick-view-tabs" style="margin-bottom: 15px; border-bottom: 2px solid #e2e8f0; display: flex;">
                <button class="modal-tab active" data-content="info">Informações Básicas</button>
                <button class="modal-tab" data-content="historico">Histórico de Tratamentos</button>
            </div>

            <div id="modal-content-details">
                <div id="info-content" class="modal-tab-content active">
                    </div>
                
                <div id="historico-content" class="modal-tab-content" style="display: none;">
                    <h4>Sessões Realizadas e Agendadas</h4>
                    <table id="tratamentos-historico-list" style="width: 100%;">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Serviço</th>
                                <th>Terapeuta</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                    <p id="no-history-message" style="margin-top: 15px; display:none;">Nenhum tratamento encontrado.</p>
                </div>
            </div>

            <button id="modal-edit-btn" class="add-button" style="margin-top: 20px;">Editar Ficha Completa</button>
            <button id="modal-schedule-btn" class="add-button" style="margin-top: 20px; background-color: #0077b6;">
                + Agendar Novo Serviço
            </button>
        </div>
    </div>
    <div id="pacote-schedule-modal" style="
        display: none; 
        position: fixed; 
        z-index: 1000; 
        left: 0; 
        top: 0; 
        width: 100%; 
        height: 100%; 
        overflow: auto; 
        background-color: rgba(0,0,0,0.5);
    ">
        <div style="
            background-color: #fefefe;
            margin: 5% auto;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 900px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        ">
            <span id="close-schedule-modal-btn" style="
                color: #aaa;
                float: right;
                font-size: 28px;
                font-weight: bold;
                cursor: pointer;
                transition: color 0.2s;
            ">&times;</span>
            
            <h3 id="pacote-schedule-title" style="border-bottom: 2px solid #eee; padding-bottom: 10px;">Grade de Sessões do Pacote</h3>
            
            <div id="schedule-grid-container">
                </div>

            <p style="margin-top: 20px; font-style: italic;">Clique em "Agendar Agora" para preencher uma vaga livre do pacote.</p>
            <button id="modal-close-schedule-btn" class="cancel-button" style="margin-top: 20px;">Fechar</button>
        </div>
    </div>
    <footer>
        <p>&copy; 2025 Clínica de Terapias Complementares. Acesso Restrito.</p>
    </footer>

    <script src="assets/js/script.js"></script>
</body>
</html>